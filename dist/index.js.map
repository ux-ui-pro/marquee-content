{"mappings":"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","sources":["src/index.js"],"sourcesContent":["class MarqueeContent {\n  #gsap;\n\n  #MM;\n\n  #timeline;\n\n  #element;\n\n  #resizeObserver;\n\n  #animationFrame;\n\n  constructor({ element = '.marquee' } = {}) {\n    this.#gsap = MarqueeContent.gsap || window.gsap;\n    this.#MM = this.#gsap.matchMedia();\n    this.#timeline = null;\n    this.#element = element instanceof HTMLElement ? element : document.querySelector(element);\n\n    if (!this.#element) return;\n\n    this.#resizeObserver = new ResizeObserver(MarqueeContent.#debounce(this.#update.bind(this)));\n    this.#resizeObserver.observe(this.#element);\n  }\n\n  static registerGSAP(gsap, ScrollTrigger) {\n    MarqueeContent.gsap = gsap;\n    MarqueeContent.ScrollTrigger = ScrollTrigger;\n  }\n\n  static #debounce(func) {\n    let timer = null;\n\n    return (...args) => {\n      if (timer !== null) {\n        cancelAnimationFrame(timer);\n      }\n\n      timer = requestAnimationFrame(() => func(...args));\n    };\n  }\n\n  #commonInit() {\n    if (this.#element) {\n      this.#clearTimeline();\n      this.#cloneElements();\n      this.#setBreakpoints();\n      this.#applySkew();\n\n      this.#timeline = this.#createAnimation();\n    }\n  }\n\n  #update() {\n    if (this.#animationFrame !== null) {\n      cancelAnimationFrame(this.#animationFrame);\n    }\n\n    this.#animationFrame = requestAnimationFrame(() => {\n      this.#commonInit();\n\n      MarqueeContent.ScrollTrigger.refresh();\n    });\n  }\n\n  #createAnimation() {\n    this.#timeline?.kill();\n\n    const timeline = this.#gsap.timeline({\n      scrollTrigger: {\n        trigger: this.#element,\n        start: 'top bottom',\n        end: 'bottom top',\n        toggleActions: 'resume pause resume pause',\n        onUpdate: (self) => {\n          if (this.#element?.dataset.mcDirection === 'ltr') {\n            timeline.timeScale(-1);\n          } else if (this.#element?.dataset.mcDirection === 'auto') {\n            timeline.timeScale(self.direction);\n          }\n        },\n      },\n    });\n\n    this.#MM.add(this.#element?.dataset.mcBreakpoint, () => {\n      const speed = parseFloat(this.#element?.dataset.mcSpeed || '20');\n\n      timeline.to(this.#element.children, {\n        duration: speed,\n        x: '-100%',\n        repeat: -1,\n        ease: 'none',\n      });\n\n      timeline.totalProgress(0.5);\n\n      return () => timeline?.kill();\n    });\n\n    return timeline;\n  }\n\n  #setBreakpoints() {\n    if (this.#element.dataset.mcMax) {\n      this.#element.dataset.mcBreakpoint = `(max-width: ${parseFloat(this.#element.dataset.mcMax) - 0.02}px)`;\n    } else if (this.#element.dataset.mcMin) {\n      this.#element.dataset.mcBreakpoint = `(min-width: ${this.#element.dataset.mcMin}px)`;\n    } else {\n      this.#element.dataset.mcBreakpoint = '';\n    }\n  }\n\n  #clearTimeline() {\n    this.#timeline?.kill();\n    this.#timeline = null;\n    this.#gsap.set(this.#element.children, { clearProps: 'all' });\n  }\n\n  #cloneElements() {\n    const removingClones = () => {\n      while (this.#element.childElementCount > 1) {\n        this.#element.removeChild(this.#element.lastChild);\n      }\n    };\n\n    removingClones();\n\n    this.#MM.add(this.#element.dataset.mcBreakpoint, () => {\n      const requiredQuantity = Math.ceil(this.#element.scrollWidth / this.#element.firstElementChild.clientWidth + 2);\n\n      if (this.#element.childElementCount < requiredQuantity) {\n        const fragment = document.createDocumentFragment();\n        const clones = Array.from({ length: requiredQuantity - 1 }, () => this.#element.firstElementChild.cloneNode(true));\n\n        clones.forEach((clone) => fragment.appendChild(clone));\n\n        this.#element.appendChild(fragment);\n      }\n\n      return removingClones;\n    });\n  }\n\n  #applySkew() {\n    if (!this.#element?.dataset.mcSkew) return;\n\n    const { style } = this.#element;\n\n    style.transformOrigin = 'center center';\n    style.transform = `skew(0deg, ${this.#element.dataset.mcSkew}deg)`;\n  }\n\n  init() {\n    this.#commonInit();\n  }\n\n  destroy() {\n    if (this.#animationFrame !== null) {\n      cancelAnimationFrame(this.#animationFrame);\n    }\n\n    if (this.#element) {\n      this.#clearTimeline();\n    }\n\n    this.#resizeObserver?.disconnect();\n  }\n}\n\nexport default MarqueeContent;\n"],"names":[],"version":3,"file":"index.js.map"}