{"mappings":"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","sources":["src/index.js","src/utils.js"],"sourcesContent":["import * as Utils from './utils.js';\n\nclass MarqueeContent {\n  #gsap;\n\n  #MM;\n\n  #timeline;\n\n  #element;\n\n  #resizeObserver;\n\n  #animationFrame;\n\n  static gsap;\n\n  static ScrollTrigger;\n\n  constructor({element = '.marquee'} = {}) {\n    this.#gsap = MarqueeContent.gsap ?? window.gsap;\n    this.#MM = this.#gsap.matchMedia();\n    this.#timeline = null;\n    this.#element = element instanceof HTMLElement ? element : document.querySelector(element);\n\n    if (!this.#element) return;\n\n    this.#resizeObserver = new ResizeObserver(Utils.debounce(() => this.#update()));\n    this.#resizeObserver.observe(this.#element);\n  }\n\n  static registerGSAP(gsap, ScrollTrigger) {\n    MarqueeContent.gsap = gsap;\n    MarqueeContent.ScrollTrigger = ScrollTrigger;\n  }\n\n  #commonInit = () => {\n    Utils.clearTimeline(this.#timeline, this.#element, this.#gsap);\n    Utils.cloning(this.#element, this.#gsap, this.#MM);\n    Utils.breakpoints(this.#element);\n    Utils.skewed(this.#element);\n\n    this.#timeline = Utils.animation(this.#element, this.#gsap, this.#MM, this.#timeline, this);\n  };\n\n  #update = () => {\n    cancelAnimationFrame(this.#animationFrame);\n    this.#animationFrame = requestAnimationFrame(() => {\n      this.#commonInit();\n\n      MarqueeContent.ScrollTrigger.refresh();\n    });\n  };\n\n  init = () => {\n    this.#commonInit();\n  }\n\n  destroy = () => {\n    cancelAnimationFrame(this.#animationFrame);\n\n    Utils.clearTimeline(this.#timeline, this.#element, this.#gsap);\n\n    this.#resizeObserver?.disconnect();\n  }\n}\n\nexport default MarqueeContent;\n","export const debounce = function(func) {\n  let timer;\n\n  return (...args) => {\n    cancelAnimationFrame(timer);\n\n    timer = requestAnimationFrame(() => func(...args));\n  };\n};\n\nexport const animation = function(element, gsap, MM, timeline, update) {\n  timeline?.kill();\n\n  timeline = gsap.timeline({\n    scrollTrigger: {\n      trigger: element,\n      start: 'top bottom',\n      end: 'bottom top',\n      toggleActions: 'resume pause resume pause',\n      onUpdate: (self) => {\n        if (element.dataset.mcDirection === 'ltr') {\n          timeline.timeScale(-1);\n        } else if (element.dataset.mcDirection === 'auto') {\n          timeline.timeScale(self.direction);\n        }\n      },\n    }\n  });\n\n  MM.add(element.dataset.mcBreakpoint, () => {\n    timeline.to(element.children, {\n      duration: element.dataset.mcDuration ?? 20,\n      x: '-100%',\n      repeat: -1,\n      ease: 'none',\n    });\n\n    timeline.totalProgress(0.5);\n\n    return () => timeline?.kill();\n  });\n\n  update.timeline = timeline;\n\n  return timeline;\n};\n\nexport const breakpoints = function(element) {\n  element.dataset.mcBreakpoint = element.dataset.mcMax\n    ? `(max-width: ${element.dataset.mcMax - 0.02}px)`\n    : element.dataset.mcMin ? `(min-width: ${element.dataset.mcMin}px)` : '';\n};\n\nexport const clearTimeline = function(timeline, element, gsap) {\n  timeline?.kill();\n  timeline = null;\n\n  gsap.set(element.children, { clearProps: 'all' });\n};\n\nexport const cloning = function(element, gsap, MM) {\n  const removingClones = () => {\n    while (element.childElementCount > 1) {\n      element.removeChild(element.lastChild);\n    }\n  };\n\n  removingClones();\n\n  MM.add(element.dataset.mcBreakpoint, () => {\n    const requiredQuantity = Math.ceil(element.scrollWidth / element.firstElementChild.clientWidth + 2);\n\n    if (element.childElementCount < requiredQuantity) {\n      const fragment = document.createDocumentFragment();\n      const clones = Array.from({ length: requiredQuantity - 1 }, () => element.firstElementChild.cloneNode(true));\n\n      clones.forEach(clone => fragment.appendChild(clone));\n\n      element.appendChild(fragment);\n    }\n\n    return removingClones;\n  });\n};\n\nexport const skewed = function(element) {\n  if (!element.dataset.mcSkew) return;\n\n  const abs = Math.abs(parseInt(element.dataset.mcSkew, 10));\n  const { style } = element;\n\n  style.transformOrigin = 'center center';\n  style.transform = `skew(0deg, ${element.dataset.mcSkew}deg)`;\n  style.minHeight = `calc(${abs * 1.25}vh + ${abs * 1.25}vw)`;\n};\n"],"names":[],"version":3,"file":"index.module.js.map"}